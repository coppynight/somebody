# PRD - Voice Twin（移动端语音数字人）

## 1. 背景
用户希望通过一次语音采访，快速创建“可通话的自己”，后续像联系人一样随时拨打语音电话获取建议、复盘和陪伴。

## 2. 目标
- 让用户在 3-5 分钟内完成创建流程并获得可通话数字人。
- 让“创建流程”体验像真实语音通话，而不是填写表单。
- 创建完成后进入“通讯录-拨号”心智，形成高频使用入口。

## 3. 非目标
- 当前阶段不做安全、权限、风控、多账号协作。
- 当前阶段不在前台暴露 TELOS 十文件。

## 4. 核心用户故事
- 作为用户，我希望像打电话一样回答问题，而不是阅读大量文字。
- 作为用户，我希望看到采访和建模进展，但信息尽量少。
- 作为用户，我希望创建完成后马上能给“我的数字人”打电话。
- 作为用户，我希望能添加其他数字人并进行语音通话。

## 5. 信息架构
- 创建通话页（首次）
- 建模仪式页
- 通讯录首页
- 通话页
- 添加数字人页
- 设置页

## 6. 详细需求

### 6.1 创建通话页（一次性）
- 页面只显示：
  - 当前问题
  - 精简进度（如 `2/4` + 细进度条）
  - 底部按钮：上一题、下一题
- 问题编排基于 TELOS：
  - `MISSION / GOALS / BELIEFS / MODELS / STRATEGIES / NARRATIVES / CHALLENGES+IDEAS`
- 采集过程中持续语音录制，保留可用于声音复刻的音频样本。
- 语音主导：界面表达“正在通话采集”，Avatar 用状态动画表达聆听/思考。
- 验收：
  - 不出现会话列表、复杂入口、Tab 导航。
  - 最后一题后进入“虚拟形象选择”步骤。

### 6.1.1 虚拟形象选择（采集最后一步）
- 用户可手动选择虚拟形象。
- 支持输入关键词进行 AI 生成推荐形象。
- 验收：
  - 选择完成后才进入建模页。

### 6.2 建模仪式页
- 展示建模动画、步骤文案、百分比进度。
- 动画节奏 4 个阶段（初始化、人格融合、语音训练、完成校准）。
- 若用户已配置 MiniMax API Key 且有有效样本，建模中自动执行声音复刻。
- 验收：
  - 完成后自动跳转通讯录首页。
  - 动效具有“完成仪式”感。

### 6.3 通讯录首页
- 置顶联系人固定为“我的数字人（你）”。
- 首页右上角有两个 icon：
  - 添加数字人
  - 设置
- 其他数字人可点击“语音电话”发起通话。
- 验收：
  - 首页操作路径简短，1 次点击可拨号。

### 6.4 通话页
- 电话式简洁布局：头像、计时、当前状态、实时转写、挂断按钮。
- 去除“点击继续会话”等非电话心智交互。
- 助理与数字人播报统一使用 MiniMax TTS 能力：
  - 创建助理：使用系统 voice_id。
  - 数字人：优先使用克隆后的 voice_id。
- 验收：
  - 通话中状态在聆听/思考/回答之间循环反馈。

### 6.5 添加数字人
- 通过数字 ID 添加到通讯录。
- 输入校验：空值与重复 ID 提示。

### 6.6 设置
- 查询：查看当前数字人 ID/名称/风格。
- 更新：名称与风格。
- 分享：生成并复制分享码。

## 7. 设计规范（当前版本）
- 视觉方向：深色科技、高对比霓虹、玻璃化卡片。
- Avatar 方向：MBTI 动漫人物风格参考，偏“温和+科技”。
- 文案规范：短句、即时状态词，避免长段说明。

## 8. 建模系统（对用户隐藏）
- 内部使用 TELOS 方法进行人格结构化建模。
- 前台仅展示“人格建模/语音建模完成”的摘要状态。
- 不直接向用户暴露十文件明细。

## 9. 开发完成状态（2026-02-12）
- 已完成移动端 H5 单页应用开发，交付文件：
  - `/Users/kaixiao/aiproject/somebody/prototype.html`
  - `/Users/kaixiao/aiproject/somebody/pageone/index.html`
- 已完成 TELOS 问题体系升级与采集仪式化：
  - 采访按 7 个 TELOS 维度提问
  - 页面显示 TELOS 阶段与仪式阶段
- 已完成虚拟形象选择：
  - 手动选择
  - AI 关键词生成推荐
- 已完成本地持久化：
  - 创建进度、采访答案、建模摘要
  - 通讯录、设置、分享码
- 已完成声音复刻链路（可用时）：
  - 采访时录制 WAV 音频样本
  - 通过 MiniMax `files/upload` + `voice_clone` 执行声音复刻
- 已接入浏览器实时语音能力（可用时）：
  - SpeechRecognition 用于采访和通话识别
  - SpeechSynthesis 用于助理提问和通话回复播报
- 已完成降级策略：语音 API 不可用时自动走模拟通话逻辑。

## 10. 当前已知风险
- 浏览器语音 API 兼容性不一致（不同系统/浏览器存在差异）。
- 前端单体实现，尚未接入服务端 STT/LLM/TTS 链路。
- MiniMax 前端直连依赖 CORS 与网络环境，生产环境建议服务端代理。
- 刷新页面后不会保留本次采访原始音频 Blob，如需重复复刻需重新采集。

## 11. 在线地址
- https://danmu-9grk7w6g3b4184bc-1340209582.tcloudbaseapp.com/pageone/
